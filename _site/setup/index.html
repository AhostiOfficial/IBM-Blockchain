<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>1. Prepare & Setup - IBM Blockchain</title>

  <link rel="stylesheet" href="/css/style.min.css">
</head>


<body>
<div class="page-container">


<div class="nav">
        <p>IBM <b>Blockchain</b></p>
        <hr>
      <ul>
        
        <li><a href="/setup/">1. Prepare & Setup</a></li>
        
        <li><a href="/simple/">2. Simple Install</a></li>
        
        <li><a href="/interacting/">3. Interacting with your Blockchain</a></li>
        
        <li><a href="/advanced/">Advanced Install</a></li>
        
        <li><a href="/reference/">Script Reference Docs</a></li>
        
        <li><a href="/404/"></a></li>
        
        <li><a href="/">Overview</a></li>
        
      </ul>
</div>


<div class="page-content">
  <h1 id="prepare--setup">Prepare &amp; Setup</h1>

<p>Before deploying the IBM Blockchain Developer Environment, you must first prepare a basic cluster on the IBM Container Service.</p>

<h2 id="prepare-required-clis-and-plugins">Prepare required CLIs and plugins</h2>

<p>First, we will download and add the CLIs and plugins that we need to interact with the IBM Container Service.</p>

<h3 id="1-download-and-install-kubectl-cli">1. Download and install kubectl CLI</h3>

<p>https://kubernetes.io/docs/tasks/kubectl/install/</p>

<h3 id="2-download-and-install-the-bluemix-cli">2. Download and install the Bluemix CLI</h3>

<p>http://clis.ng.bluemix.net/ui/home.html</p>

<h3 id="3-add-the-bluemix-plugins-repo">3. Add the bluemix plugins repo</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>bx plugin repo-add bluemix https://plugins.ng.bluemix.net
</code></pre>
</div>

<h3 id="4-add-the-container-service-plugin">4. Add the container service plugin</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>bx plugin install container-service -r bluemix
</code></pre>
</div>

<h2 id="setup-a-cluster">Setup a cluster</h2>

<p>Now, we will use those CLIs and plugins to create a cluster on the IBM Container Service.  Use these steps to setup a cluster named <strong><em>blockchain</em></strong> on IBM Container Service.</p>

<h3 id="5-point-bluemix-cli-to-production-api">5. Point Bluemix CLI to production API</h3>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx api api.ng.bluemix.net
</code></pre>
</div>

<h3 id="6-login-to-bluemix">6. Login to bluemix</h3>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx login
</code></pre>
</div>

<p>If your id is federated in an SSO, you will have to run the following command to login:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx login -sso
</code></pre>
</div>

<h3 id="7-create-a-cluster-on-ibm-container-service">7. Create a cluster on IBM Container Service</h3>

<p>This will create a <strong>free cluster</strong> named <em>blockchain</em> on the IBM Container Service.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx cs cluster-create --name blockchain
</code></pre>
</div>

<h3 id="8-wait-for-the-cluster-to-be-ready">8. Wait for the cluster to be ready</h3>

<p>Issue the following command to ascertain the status of your cluster:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx cs clusters
</code></pre>
</div>

<p>The process goes through the following lifecycle - <code class="highlighter-rouge">requesting</code> –&gt; <code class="highlighter-rouge">pending</code> –&gt; <code class="highlighter-rouge">deploying</code> –&gt; <code class="highlighter-rouge">normal</code>.  Initially you will see something similar to the following:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Name         ID                                 State       Created                    Workers
blockchain   7fb45431d9a54d2293bae421988b0080   deploying   2017-05-09T14:55:09+0000   0
</code></pre>
</div>

<p>Wait for the State to change to <em>normal</em>. Note that this can take upwards of 15-30 minutes. If it takes more than 30 minutes, there is an inner issue on the IBM Container Service.</p>

<p>You should see the following output when the cluster is ready:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>$ bx cs clusters
Listing clusters...
OK
Name         ID                                 State    Created                    Workers
blockchain   0783c15e421749a59e2f5b7efdd351d1   normal   2017-05-09T16:13:11+0000   1

</code></pre>
</div>

<p>Use the following syntax to inspect on the status of the workers:
Command:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx cs workers &lt;cluster-name&gt;
</code></pre>
</div>

<p>For example:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx cs workers blockchain
</code></pre>
</div>

<p>The expected response is as follows:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>$ bx cs workers blockchain
Listing cluster workers...
OK
ID                                                 Public IP       Private IP       Machine Type   State    Status
kube-dal10-pa0783c15e421749a59e2f5b7efdd351d1-w1   169.48.140.48   10.176.190.176   free           normal   Ready
</code></pre>
</div>

<h3 id="9-configure-kubectl-to-use-the-cluster">9. Configure kubectl to use the cluster</h3>

<p>Issue the following command to download the configuration for your cluster:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bx cs cluster-config blockchain
</code></pre>
</div>

<p>Expected output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Downloading cluster config for blockchain
OK
The configuration for blockchain was downloaded successfully. Export environment variables to start using Kubernetes.

export KUBECONFIG=/home/*****/.bluemix/plugins/container-service/clusters/blockchain/kube-config-prod-dal10-blockchain.yml
</code></pre>
</div>

<h3 id="10-configure-kubectl-to-use-the-cluster">10. Configure kubectl to use the cluster</h3>

<p>Use the export command printed as output in <a href="./create-cluster.md#5">step 5</a> to point your kubectl cli to the cluster.</p>

<p><em>Note</em>: If you are on windows, you should use <code class="highlighter-rouge">set</code> in place of <code class="highlighter-rouge">export</code>. If the scripts run in a different terminal or git bash, you should start git-bash and use the export command.</p>

<hr />

<h2 id="congratulations">Congratulations!</h2>
<p>You have successfully created the blockchain cluster on IBM Container Service.  Next, you will deploy the Developer Environment.  Most users will want to follow the <strong>Simple Install</strong> instructions (Advanced and Reference are there for those who want to e.g. only set up part of the environment).</p>

<p>ADD BUTTON LINKING TO SIMPLE INSTALL INSTRUCTIONS</p>

</div>

<div class="next-page">
  <div class="PageNavigation">
  
</div>
</div>
</div>
</body>
</html>
